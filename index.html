import React, { useState } from "react";
import { motion } from "framer-motion";

// Kiralino â€” Remote premium car rental brokerage (no public prices/km)
// - WhatsApp-first funnel; automatic (A) only; extras on request
// - TailwindCSS expected via CDN in index.html

const WA_NUMBER = "+905537115022";
const WA_LINK = `https://wa.me/${WA_NUMBER.replace(/[^\d+]/g, "")}`;
const WEBHOOK_URL = ""; // optional webhook to forward booking payload

const LANGS = [
  { code: "tr", label: "ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e" },
  { code: "de", label: "ğŸ‡©ğŸ‡ª Deutsch" },
  { code: "en", label: "ğŸ‡¬ğŸ‡§ English" },
  { code: "ar", label: "ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" },
];

// ===== Texts =====
const t = {
  tr: {
    brand: "KIRALINO",
    tagline: "Premium araÃ§ kiralama â€” uzaktan aracÄ±lÄ±k",
    heroSub:
      "Avrupa genelinde premium sÄ±nÄ±flar. Fiyat ve uygunluk WhatsApp ile â€” otomatik (A) sadece.",
    nav: { book: "Rezervasyon", fleet: "Kategoriler", how: "AÅŸamalar", contact: "Ä°letiÅŸim" },
    ctaPrimary: "WhatsAppâ€™tan yazÄ±n",
    ctaSecondary: "Kategorileri gÃ¶r",
    featuresTitle: "Neden Kiralino?",
    features: [
      { title: "Premium odak", text: "Sâ€‘Class, GLE, Vâ€‘Class, AMG / M / RS ve daha fazlasÄ±." },
      { title: "Tamamen uzaktan", text: "Rezervasyonu biz yaparÄ±z; teslim/iade kiralama firmasÄ±nda." },
      { title: "Ekstralar isteÄŸe baÄŸlÄ±", text: "Premium koruma, Ã§ocuk koltuÄŸu, dizel garantisi, 2. sÃ¼rÃ¼cÃ¼, sÄ±nÄ±r geÃ§iÅŸi â€” talep Ã¼zerine." },
    ],
    fleetTitle: "Premium kategoriler (Ã¶rnek modeller, {orSimilar})",
    orSimilar: "veya benzeri",
    categories: [
      { code: "premium_sedan", name: "Premium Sedan", modelsKey: "premium_sedan" },
      { code: "luxury_sedan", name: "LÃ¼ks Sedan", modelsKey: "luxury_sedan" },
      { code: "suv_premium", name: "Premium SUV", modelsKey: "suv_premium" },
      { code: "suv_fullsize", name: "Fullâ€‘Size SUV", modelsKey: "suv_fullsize" },
      { code: "van_premium", name: "Premium Van 7â€“9", modelsKey: "van_premium" },
      { code: "electric_premium", name: "Premium Elektrik", modelsKey: "electric_premium" },
      { code: "convertible_premium", name: "Cabrio Premium", modelsKey: "convertible_premium" },
      { code: "performance", name: "Performans", modelsKey: "performance" },
    ],
    howTitle: "NasÄ±l Ã§alÄ±ÅŸÄ±r?",
    steps: [
      { title: "Talebinizi iletin", text: "Tarih, istasyon, kategori, notlar â€” WhatsApp veya form." },
      { title: "Uygunluk eÅŸleÅŸtirme", text: "Partner aÄŸÄ±nda en iyi premium seÃ§eneÄŸi bulup size gÃ¶nderiyoruz." },
      { title: "Onay & voucher", text: "Onay sonrasÄ± nihai saÄŸlayÄ±cÄ±yla rezervasyon; teslim/iade saÄŸlayÄ±cÄ±da." },
    ],
    faqTitle: "SÄ±k sorulanlar",
    faqs: [
      { q: "Neden fiyat yok?", a: "Fiyat tarih/Ã¼lke/saÄŸlayÄ±cÄ±ya gÃ¶re deÄŸiÅŸir; talep Ã¼zerine teklif gÃ¶ndeririz." },
      { q: "Ekstralar?", a: "Premium koruma, Ã§ocuk koltuÄŸu, kÄ±ÅŸ lastiÄŸi, dizel, 2. sÃ¼rÃ¼cÃ¼, sÄ±nÄ±r geÃ§iÅŸi â€” talep Ã¼zerine." },
    ],
    thankTitle: "Talebinizi aldÄ±k!",
    thankDesc: "KÄ±sa sÃ¼rede WhatsAppâ€™tan dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.",
    reviewsTitle: "MÃ¼ÅŸteri yorumlarÄ±",
    contactTitle: "WhatsAppâ€™tan yazÄ±n",
    footer: "Â© Kiralino â€” Premium araÃ§ kiralama aracÄ±lÄ±ÄŸÄ±",
  },
  de: {
    brand: "KIRALINO",
    tagline: "Premiumâ€‘Mietwagen â€” Remoteâ€‘Vermittlung",
    heroSub:
      "Europaweit Premiumâ€‘Klassen. VerfÃ¼gbarkeit & Preis per WhatsApp â€” nur Automatik (A).",
    nav: { book: "Buchung", fleet: "Kategorien", how: "Ablauf", contact: "Kontakt" },
    ctaPrimary: "Auf WhatsApp schreiben",
    ctaSecondary: "Kategorien ansehen",
    featuresTitle: "Warum Kiralino?",
    features: [
      { title: "Premiumâ€‘Fokus", text: "Sâ€‘Klasse, GLE, Vâ€‘Klasse, AMG / M / RS u. a." },
      { title: "100% Remote", text: "Wir vermitteln & reservieren; Ãœbergabe/RÃ¼ckgabe beim Anbieter." },
      { title: "Extras auf Anfrage", text: "Premiumâ€‘Schutz, Kindersitz, Dieselâ€‘Garantie, 2. Fahrer, GrenzÃ¼bertritt â€” auf Anfrage." },
    ],
    fleetTitle: "Premiumâ€‘Kategorien (Beispielmodelle, {orSimilar})",
    orSimilar: "oder Ã¤hnlich",
    categories: [
      { code: "premium_sedan", name: "Premium Limousine", modelsKey: "premium_sedan" },
      { code: "luxury_sedan", name: "Luxury Limousine", modelsKey: "luxury_sedan" },
      { code: "suv_premium", name: "Premium SUV", modelsKey: "suv_premium" },
      { code: "suv_fullsize", name: "Fullâ€‘Size SUV", modelsKey: "suv_fullsize" },
      { code: "van_premium", name: "Premium Van 7â€“9", modelsKey: "van_premium" },
      { code: "electric_premium", name: "Premium Elektro", modelsKey: "electric_premium" },
      { code: "convertible_premium", name: "Cabrio Premium", modelsKey: "convertible_premium" },
      { code: "performance", name: "Performance", modelsKey: "performance" },
    ],
    howTitle: "So funktioniertâ€™s",
    steps: [
      { title: "Details senden", text: "Zeitraum, Station, Kategorie, Notizen â€” via WhatsApp oder Formular." },
      { title: "Matching", text: "Wir finden im Partnernetz die beste Premiumâ€‘Option und schicken das Angebot." },
      { title: "BestÃ¤tigung & Voucher", text: "Nach BestÃ¤tigung buchen wir beim Anbieter; Ãœbergabe/Retour beim Anbieter." },
    ],
    faqTitle: "FAQ",
    faqs: [
      { q: "Warum keine Preise online?", a: "Preise variieren je Zeitraum/Land/Anbieter. Wir kalkulieren individuell und senden ein Angebot." },
      { q: "Welche Extras gibt es?", a: "Premiumâ€‘Schutz, Kindersitze, Winterreifen, Dieselâ€‘Garantie, Zweitfahrer, GrenzÃ¼bertritt â€“ auf Anfrage & VerfÃ¼gbarkeit." },
    ],
    thankTitle: "Anfrage erhalten!",
    thankDesc: "Wir melden uns in KÃ¼rze per WhatsApp.",
    reviewsTitle: "Kundenstimmen",
    contactTitle: "Jetzt per WhatsApp schreiben",
    footer: "Â© Kiralino â€” Remoteâ€‘Vermittlung Premiumâ€‘Mietwagen",
  },
  en: {
    brand: "KIRALINO",
    tagline: "Premium car rentals â€” Remote brokerage",
    heroSub:
      "Premium classes across Europe. Availability & quote via WhatsApp â€” automatic (A) only.",
    nav: { book: "Booking", fleet: "Categories", how: "Process", contact: "Contact" },
    ctaPrimary: "Message on WhatsApp",
    ctaSecondary: "Browse categories",
    featuresTitle: "Why Kiralino?",
    features: [
      { title: "Premium only", text: "Sâ€‘Class, GLE, Vâ€‘Class, AMG / M / RS and more." },
      { title: "Fully remote", text: "We broker & reserve; pickup/return handled by supplier." },
      { title: "Extras on request", text: "Premium protection, child seats, diesel guarantee, 2nd driver, crossâ€‘border â€” on request." },
    ],
    fleetTitle: "Premium categories (example models, {orSimilar})",
    orSimilar: "or similar",
    categories: [
      { code: "premium_sedan", name: "Premium Sedan", modelsKey: "premium_sedan" },
      { code: "luxury_sedan", name: "Luxury Sedan", modelsKey: "luxury_sedan" },
      { code: "suv_premium", name: "Premium SUV", modelsKey: "suv_premium" },
      { code: "suv_fullsize", name: "Fullâ€‘Size SUV", modelsKey: "suv_fullsize" },
      { code: "van_premium", name: "Premium Van 7â€“9", modelsKey: "van_premium" },
      { code: "electric_premium", name: "Premium Electric", modelsKey: "electric_premium" },
      { code: "convertible_premium", name: "Convertible Premium", modelsKey: "convertible_premium" },
      { code: "performance", name: "Performance", modelsKey: "performance" },
    ],
    howTitle: "How it works",
    steps: [
      { title: "Send your request", text: "Dates, station, category, notes â€” via WhatsApp or form." },
      { title: "We match options", text: "We search our partner network for the best premium fit and send it for approval." },
      { title: "Confirm & voucher", text: "After your OK we reserve with the supplier; pickup/return handled by them." },
    ],
    faqTitle: "FAQ",
    faqs: [
      { q: "Why no prices online?", a: "Pricing varies by dates/country/supplier. We quote individually on request." },
      { q: "Extras?", a: "Premium protection, child seats, winter tyres, diesel guarantee, second driver, crossâ€‘border â€“ on request and subject to availability." },
    ],
    thankTitle: "Request received!",
    thankDesc: "Weâ€™ll get back to you shortly on WhatsApp.",
    reviewsTitle: "What customers say",
    contactTitle: "Message us on WhatsApp",
    footer: "Â© Kiralino â€” Premium brokerage",
  },
  ar: {
    brand: "KIRALINO",
    tagline: "ØªØ£Ø¬ÙŠØ± Ø³ÙŠØ§Ø±Ø§Øª ÙØ§Ø®Ø±Ø© â€” ÙˆØ³ÙŠØ· Ø¹Ù† Ø¨ÙØ¹Ø¯",
    heroSub: "ÙØ¦Ø§Øª ÙØ§Ø®Ø±Ø© ÙÙŠ ÙƒÙ„ Ø£ÙˆØ±ÙˆØ¨Ø§. Ø§Ù„ØªØ³Ø¹ÙŠØ± Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ â€” Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ ÙÙ‚Ø· (A).",
    nav: { book: "Ø­Ø¬Ø²", fleet: "Ø§Ù„ÙØ¦Ø§Øª", how: "Ø§Ù„Ø®Ø·ÙˆØ§Øª", contact: "ØªÙˆØ§ØµÙ„" },
    ctaPrimary: "Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨",
    ctaSecondary: "ØªØµÙÙ‘Ø­ Ø§Ù„ÙØ¦Ø§Øª",
    featuresTitle: "Ù„Ù…Ø§Ø°Ø§ ÙƒÙŠØ±Ø§Ù„ÙŠÙ†ÙˆØŸ",
    features: [
      { title: "ÙØ¦Ø© ÙØ§Ø®Ø±Ø© ÙÙ‚Ø·", text: "Sâ€‘Class Ùˆ GLE Ùˆ Vâ€‘Class Ùˆ AMG / M / RS ÙˆØºÙŠØ±Ù‡Ø§." },
      { title: "ÙˆØ³Ø§Ø·Ø© Ø¹Ù† Ø¨ÙØ¹Ø¯", text: "Ù†Ø­Ù† Ù†Ø­Ø¬Ø²Ø› Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…/Ø§Ù„ØªØ³Ù„ÙŠÙ… Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯." },
      { title: "Ø¥Ø¶Ø§ÙØ§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨", text: "Ø­Ù…Ø§ÙŠØ© Ù…Ù…ÙŠØ²Ø©ØŒ Ù…Ù‚Ø§Ø¹Ø¯ Ø£Ø·ÙØ§Ù„ØŒ Ø¯ÙŠØ²Ù„ Ù…Ø¶Ù…ÙˆÙ†ØŒ Ø³Ø§Ø¦Ù‚ Ø«Ø§Ù†ÙØŒ Ø¹Ø¨ÙˆØ± Ø­Ø¯ÙˆØ¯." },
    ],
    fleetTitle: "ÙØ¦Ø§Øª Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… (Ù†Ù…Ø§Ø°Ø¬ Ù…Ø«Ø§Ù„ØŒ {orSimilar})",
    orSimilar: "Ø£Ùˆ Ù…Ø§ Ø´Ø§Ø¨Ù‡",
    categories: [
      { code: "premium_sedan", name: "Ø³ÙŠØ¯Ø§Ù† Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", modelsKey: "premium_sedan" },
      { code: "luxury_sedan", name: "Ø³ÙŠØ¯Ø§Ù† ÙØ§Ø®Ø±Ø©", modelsKey: "luxury_sedan" },
      { code: "suv_premium", name: "SUV Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", modelsKey: "suv_premium" },
      { code: "suv_fullsize", name: "SUV ÙƒØ¨ÙŠØ±Ø©", modelsKey: "suv_fullsize" },
      { code: "van_premium", name: "ÙØ§Ù† 7â€“9 Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", modelsKey: "van_premium" },
      { code: "electric_premium", name: "ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", modelsKey: "electric_premium" },
      { code: "convertible_premium", name: "ÙƒØ§Ø¨Ø±ÙŠÙˆ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", modelsKey: "convertible_premium" },
      { code: "performance", name: "Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„Ù", modelsKey: "performance" },
    ],
    howTitle: "ÙƒÙŠÙ ØªØ¹Ù…Ù„ØŸ",
    steps: [
      { title: "Ø£Ø±Ø³Ù„ Ø§Ù„ØªÙØ§ØµÙŠÙ„", text: "ØªÙˆØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ù…Ø­Ø·Ø©ØŒ Ø§Ù„ÙØ¦Ø©ØŒ Ù…Ù„Ø§Ø­Ø¸Ø§Øª â€” Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø£Ùˆ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬." },
      { title: "Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª", text: "Ù†Ø¨Ø­Ø« ÙÙŠ Ø´Ø¨ÙƒØ© Ø´Ø±ÙƒØ§Ø¦Ù†Ø§ Ø¹Ù† Ø£Ù†Ø³Ø¨ Ø®ÙŠØ§Ø± ÙØ§Ø®Ø± ÙˆÙ†Ø±Ø³Ù„Ù‡ Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø©." },
      { title: "ØªØ£ÙƒÙŠØ¯ ÙˆÙ‚Ø³ÙŠÙ…Ø©", text: "Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ù†Ø­Ø¬Ø² Ù„Ø¯Ù‰ Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯Ø› Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…/Ø§Ù„ØªØ³Ù„ÙŠÙ… Ø¹Ù†Ø¯Ù‡." },
    ],
    faqTitle: "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©",
    faqs: [
      { q: "Ù„Ù…Ø§Ø°Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¹Ø§Ø±ØŸ", a: "Ø§Ù„Ø³Ø¹Ø± ÙŠØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„Ù…ÙˆØ±Ù‘Ø¯Ø› Ù†Ø±Ø³Ù„ Ø¹Ø±Ø¶Ù‹Ø§ Ù…Ø®ØµØµÙ‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨." },
      { q: "Ø¥Ø¶Ø§ÙØ§Øª Ù…ØªØ§Ø­Ø©ØŸ", a: "Ø­Ù…Ø§ÙŠØ© Ù…Ù…ÙŠØ²Ø©ØŒ Ù…Ù‚Ø¹Ø¯ Ø£Ø·ÙØ§Ù„ØŒ Ø¯ÙŠØ²Ù„ Ù…Ø¶Ù…ÙˆÙ†ØŒ Ø³Ø§Ø¦Ù‚ Ø«Ø§Ù†ÙØŒ Ø¹Ø¨ÙˆØ± Ø­Ø¯ÙˆØ¯ â€” Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨." },
    ],
    thankTitle: "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨!",
    thankDesc: "Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ… Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨.",
    reviewsTitle: "Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",
    contactTitle: "Ø±Ø§Ø³ÙÙ„Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",
    footer: "Â© ÙƒÙŠØ±Ø§Ù„ÙŠÙ†Ùˆ â€” ÙˆØ³Ø§Ø·Ø© ØªØ£Ø¬ÙŠØ± Ø³ÙŠØ§Ø±Ø§Øª ÙØ§Ø®Ø±Ø©",
  },
};

function cls(...c){return c.filter(Boolean).join(" ");}

const OrangeButton = ({ children, href }) => (
  <a href={href} className="inline-flex items-center justify-center rounded-2xl px-5 py-3 text-base font-semibold bg-orange-500 text-white shadow hover:bg-orange-600 transition">{children}</a>
);
const GhostButton = ({ children, href }) => (
  <a href={href} className="inline-flex items-center justify-center rounded-2xl px-5 py-3 text-base font-semibold border border-white/30 text-white hover:bg-white/10 transition">{children}</a>
);
const Section = ({ id, children, className }) => (
  <section id={id} className={cls("py-16 md:py-24", className)}><div className="max-w-6xl mx-auto px-4 md:px-6">{children}</div></section>
);

// Category images (licenseâ€‘free placeholders)
const CATEGORY_IMAGE_SRC = {
  premium_sedan: "https://source.unsplash.com/800x600/?mercedes,e-class,sedan",
  luxury_sedan: "https://source.unsplash.com/800x600/?mercedes,s-class,sedan",
  suv_premium: "https://source.unsplash.com/800x600/?premium,suv",
  suv_fullsize: "https://source.unsplash.com/800x600/?fullsize,suv",
  van_premium: "https://source.unsplash.com/800x600/?mercedes,v-class,van",
  electric_premium: "https://source.unsplash.com/800x600/?electric,luxury,car",
  convertible_premium: "https://source.unsplash.com/800x600/?convertible,luxury,car",
  performance: "https://source.unsplash.com/800x600/?sport,luxury,car",
};

const MODELS = {
  premium_sedan: ["Mercedesâ€‘Benz Eâ€‘Class", "BMW 5 Series", "Audi A6"],
  luxury_sedan: ["Mercedesâ€‘Benz Sâ€‘Class", "BMW 7 Series", "Audi A8"],
  suv_premium: ["Mercedesâ€‘Benz GLC", "BMW X3", "Audi Q5"],
  suv_fullsize: ["Mercedesâ€‘Benz GLE", "BMW X5", "Audi Q7"],
  van_premium: ["Mercedesâ€‘Benz Vâ€‘Class (7â€“8)", "VW Multivan"],
  electric_premium: ["Mercedes EQE", "BMW i5", "Audi Q8 eâ€‘tron"],
  convertible_premium: ["BMW 4 Series Cabrio", "Mercedes C Cabrio", "Audi A5 Cabrio"],
  performance: ["Mercedesâ€‘AMG", "BMW M", "Audi RS"],
};

function extrasLine(lang){
  return lang==='de'
    ? 'Extras auf Anfrage: Premiumâ€‘Schutz, Kindersitz, Dieselâ€‘Garantie, 2. Fahrer, GrenzÃ¼bertritt.'
    : lang==='tr'
    ? 'Ekstralar talep Ã¼zerine: Premium koruma, Ã§ocuk koltuÄŸu, dizel garantisi, 2. sÃ¼rÃ¼cÃ¼, sÄ±nÄ±r geÃ§iÅŸi.'
    : lang==='ar'
    ? 'Ø¥Ø¶Ø§ÙØ§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨: Ø­Ù…Ø§ÙŠØ© Ù…Ù…ÙŠØ²Ø©ØŒ Ù…Ù‚Ø¹Ø¯ Ø£Ø·ÙØ§Ù„ØŒ Ø¯ÙŠØ²Ù„ Ù…Ø¶Ù…ÙˆÙ†ØŒ Ø³Ø§Ø¦Ù‚ Ø«Ø§Ù†ÙØŒ Ø¹Ø¨ÙˆØ± Ø­Ø¯ÙˆØ¯.'
    : 'Extras on request: premium protection, child seat, diesel guarantee, 2nd driver, crossâ€‘border.';
}

function CategoryGrid({dict, lang}){
  const orSimilar = dict.orSimilar || 'or similar';
  const autoOnly = lang==='de' ? 'Automatik (A)' : lang==='tr' ? 'Otomatik (A)' : lang==='ar' ? 'Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ (A)' : 'Automatic (A)';
  return (
    <div className="grid md:grid-cols-2 gap-6">
      {dict.categories.map((c)=>{
        const models = MODELS[c.modelsKey] || [];
        const src = CATEGORY_IMAGE_SRC[c.code] || CATEGORY_IMAGE_SRC[c.modelsKey] || CATEGORY_IMAGE_SRC['premium_sedan'];
        return (
          <div key={c.code} className="overflow-hidden rounded-2xl border border-white/10 bg-slate-900/70">
            <img src={src} alt={`${c.name} example`} loading="lazy" className="w-full h-40 sm:h-44 md:h-56 object-cover rounded-b-2xl"/>
            <div className="p-5">
              <div className="text-lg font-semibold">{c.name}</div>
              <div className="text-white/70 text-sm mt-1">{autoOnly}</div>
              <div className="text-white/80 text-sm mt-2">{models.join(' Â· ')} ({orSimilar})</div>
              <div className="text-xs text-white/50 mt-2">{extrasLine(lang)}</div>
              <div className="mt-4"><OrangeButton href="#book">{dict.nav?.book || 'Book'}</OrangeButton></div>
            </div>
          </div>
        )
      })}
    </div>
  );
}

// ---- Booking helpers ----
function buildBookingMessage(form, lang){
  return [
    'ğŸ†• New booking request',
    `Lang: ${lang?.toUpperCase?.() || ''}`,
    `Name: ${form.name || '-'}`,
    `WhatsApp: ${form.phone || '-'}`,
    `Route: ${form.pickup || '-'} â†’ ${form.dropoff || '-'}`,
    `Pickup: ${form.pickDate || '-'} ${form.pickTime || ''}`,
    `Dropoff: ${form.dropDate || '-'} ${form.dropTime || ''}`,
    `Category: ${form.category || '-'}`,
    `Notes: ${form.notes || '-'}`,
  ].join('\n');
}

function BookingForm({ dict, lang }){
  const [submitted, setSubmitted] = useState(false);
  const [sending, setSending] = useState(false);
  const [form, setForm] = useState({ name: "", phone: "", pickup: "", dropoff: "", pickDate: "", pickTime: "", dropDate: "", dropTime: "", category: "", notes: "" });
  const on = (k) => (e) => setForm((f) => ({ ...f, [k]: e.target.value }));
  async function onSubmit(e){
    e.preventDefault();
    if(!form.name || !form.phone || !form.pickup || !form.pickDate || !form.dropDate){ alert(lang==='de'?'Bitte Pflichtfelder ausfÃ¼llen.':lang==='tr'?'LÃ¼tfen zorunlu alanlarÄ± doldurun.':lang==='ar'?'ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.':'Please fill required fields.'); return; }
    setSending(true);
    try{
      const msg = buildBookingMessage(form, lang);
      const payload = { source:'kiralino-web', to: WA_NUMBER, message: msg, lang, fields: form, submittedAt: new Date().toISOString() };
      if (typeof fetch !== 'undefined' && WEBHOOK_URL) {
        await fetch(WEBHOOK_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
      } else {
        console.warn('WEBHOOK_URL not set â€” payload for WhatsApp:', payload);
      }
      setSubmitted(true);
      setForm({ name: "", phone: "", pickup: "", dropoff: "", pickDate: "", pickTime: "", dropDate: "", dropTime: "", category: "", notes: "" });
    } catch(err){ console.error(err); alert(lang==='de'?'Fehler beim Senden.':lang==='tr'?'GÃ¶nderim hatasÄ±.':lang==='ar'?'ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.':'Failed to send.'); }
    finally{ setSending(false); }
  }
  if (submitted){
    return (
      <div className="rounded-3xl bg-slate-900/70 border border-white/10 p-8 text-center">
        <h3 className="text-2xl font-bold mb-2">{dict.thankTitle || 'Danke!'}</h3>
        <p className="text-white/70 mb-6">{dict.thankDesc || 'We will contact you shortly.'}</p>
        <div className="flex items-center justify-center gap-3">
          <OrangeButton href={WA_LINK}>WhatsApp</OrangeButton>
          <GhostButton href="#fleet">{dict.ctaSecondary}</GhostButton>
        </div>
      </div>
    );
  }
  const labels = {
    tr:{name:'Ad Soyad',phone:'WhatsApp numarasÄ±',pickup:'AlÄ±ÅŸ konumu',dropoff:'Teslim konumu',pickDate:'AlÄ±ÅŸ tarihi',pickTime:'AlÄ±ÅŸ saati',dropDate:'Teslim tarihi',dropTime:'Teslim saati',category:'Kategori',notes:'Notlar (araÃ§ tercihi/uÃ§uÅŸ no)',submit:'GÃ¶nder'},
    de:{name:'Name',phone:'WhatsApp-Nummer',pickup:'Abholort',dropoff:'RÃ¼ckgabeort',pickDate:'Abholdatum',pickTime:'Abholzeit',dropDate:'RÃ¼ckgabedatum',dropTime:'RÃ¼ckgabezeit',category:'Kategorie',notes:'Notizen (Fahrzeugwunsch/Flugnr.)',submit:'Senden'},
    en:{name:'Full name',phone:'WhatsApp number',pickup:'Pick-up location',dropoff:'Drop-off location',pickDate:'Pick-up date',pickTime:'Pick-up time',dropDate:'Drop-off date',dropTime:'Drop-off time',category:'Category',notes:'Notes (car pref./flight no.)',submit:'Send'},
    ar:{name:'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„',phone:'Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨',pickup:'Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…',dropoff:'Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªØ³Ù„ÙŠÙ…',pickDate:'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…',pickTime:'ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…',dropDate:'ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ù„ÙŠÙ…',dropTime:'ÙˆÙ‚Øª Ø§Ù„ØªØ³Ù„ÙŠÙ…',category:'Ø§Ù„ÙØ¦Ø©',notes:'Ù…Ù„Ø§Ø­Ø¸Ø§Øª (ØªÙØ¶ÙŠÙ„/Ø±Ù‚Ù… Ø§Ù„Ø±Ø­Ù„Ø©)',submit:'Ø¥Ø±Ø³Ø§Ù„'}
  }[lang] || {};
  return (
    <form onSubmit={onSubmit} className="rounded-3xl bg-slate-900/70 border border-white/10 p-6 md:p-8">
      <h3 className="text-xl md:text-2xl font-bold mb-1">{dict.nav?.book || 'Booking'}</h3>
      <p className="text-white/70 mb-6">{dict.heroSub}</p>
      <div className="grid md:grid-cols-2 gap-4">
        <input className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.name} value={form.name} onChange={on('name')} />
        <input className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.phone} value={form.phone} onChange={on('phone')} />
        <input className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.pickup} value={form.pickup} onChange={on('pickup')} />
        <input className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.dropoff} value={form.dropoff} onChange={on('dropoff')} />
        <input type="date" className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.pickDate} value={form.pickDate} onChange={on('pickDate')} />
        <input type="time" className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.pickTime} value={form.pickTime} onChange={on('pickTime')} />
        <input type="date" className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.dropDate} value={form.dropDate} onChange={on('dropDate')} />
        <input type="time" className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.dropTime} value={form.dropTime} onChange={on('dropTime')} />
        <select className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" value={form.category} onChange={on('category')}>
          <option value="">{labels.category || 'Category'}</option>
          {t[lang].categories.map((c)=> <option key={c.code} value={c.code}>{c.name}</option>)}
        </select>
        <input className="bg-slate-800/70 border border-white/10 rounded-xl px-4 py-3" placeholder={labels.notes} value={form.notes} onChange={on('notes')} />
      </div>
      <button disabled={sending} className="mt-5 inline-flex items-center justify-center rounded-2xl px-5 py-3 text-base font-semibold bg-orange-500 text-white shadow hover:bg-orange-600 disabled:opacity-60">{sending ? 'â€¦' : labels.submit || 'Send'}</button>
    </form>
  );
}

// ---------- Runtime Smoke Tests ----------
function runSmokeTests(){
  const must = ["brand","tagline","heroSub","ctaPrimary","ctaSecondary","featuresTitle","fleetTitle","howTitle","faqTitle","contactTitle","footer"];
  ["tr","de","en","ar"].forEach(lng=>{
    const d=t[lng];
    console.assert(d,`Missing dict for ${lng}`);
    must.forEach(k=>console.assert(d && d[k]!=null,`Missing t.${lng}.${k}`));
    console.assert(Array.isArray(d.categories)&&d.categories.length>0,`No categories for ${lng}`);
    d.categories.forEach(c=>{
      console.assert(MODELS[c.modelsKey]?.length>0,`No models for ${lng}.${c.modelsKey}`);
      console.assert(CATEGORY_IMAGE_SRC[c.code]!=null,`No image for code ${c.code}`);
    });
    const steps=d.steps||[]; console.assert(steps.length>=3,`steps missing for ${lng}`);
    steps.forEach((s,i)=>{console.assert(s.title&&s.text,`step ${i} invalid for ${lng}`)});
  });
  const msg=buildBookingMessage({name:'T',phone:'+49',pickup:'MUC',dropoff:'MUC',pickDate:'2025-01-01',dropDate:'2025-01-05'},'de');
  console.assert(msg.includes('\n'),'message newline');
  console.assert(/^https:\/\/wa\.me\//.test(WA_LINK),'wa link');
}
runSmokeTests();

export default function App(){
  const [lang,setLang]=useState("de");
  const dict=t[lang];
  const dir=lang==="ar"?"rtl":"ltr";
  const align=lang==="ar"?"text-right":"text-left";
  return (
    <div className="min-h-screen bg-slate-950 text-white" dir={dir} id="top">
      <header className="sticky top-0 z-50 backdrop-blur bg-slate-950/70 border-b border-white/10">
        <div className="max-w-6xl mx-auto px-4 md:px-6 h-16 flex items-center justify-between">
          <a href="#top" className="flex items-center gap-3 group">
            <div className="h-8 w-8 rounded-xl bg-orange-500 grid place-items-center font-extrabold shadow group-hover:scale-105 transition">K</div>
            <span className="tracking-wider font-extrabold text-xl group-hover:text-orange-400 transition">{dict.brand}</span>
          </a>
          <nav className="hidden md:flex items-center gap-6 text-sm">
            <a href="#book" className="hover:text-orange-400">{dict.nav?.book||'Book'}</a>
            <a href="#fleet" className="hover:text-orange-400">{dict.nav?.fleet||'Fleet'}</a>
            <a href="#how" className="hover:text-orange-400">{dict.nav?.how||'How'}</a>
            <a href="#contact" className="hover:text-orange-400">{dict.nav?.contact||'Contact'}</a>
            <div className="relative">
              <select value={lang} onChange={e=>setLang(e.target.value)} className="bg-slate-800 text-white border border-white/20 rounded-lg px-2 py-1 font-semibold" aria-label="language-select">
                {LANGS.map(l=>(<option key={l.code} value={l.code}>{l.label}</option>))}
              </select>
            </div>
          </nav>
              </div>
              {/* Mobile quick nav + language */}
              <div className="md:hidden border-t border-white/10">
                <div className="max-w-6xl mx-auto px-4 py-2 flex flex-wrap items-center gap-2 text-sm">
                  <a href="#book" className="px-3 py-1 rounded-lg bg-white/5 hover:bg-white/10">{dict.nav?.book||'Book'}</a>
                  <a href="#fleet" className="px-3 py-1 rounded-lg bg-white/5 hover:bg-white/10">{dict.nav?.fleet||'Fleet'}</a>
                  <a href="#how" className="px-3 py-1 rounded-lg bg-white/5 hover:bg-white/10">{dict.nav?.how||'How'}</a>
                  <a href="#contact" className="px-3 py-1 rounded-lg bg-white/5 hover:bg-white/10">{dict.nav?.contact||'Contact'}</a>
                  <span className="flex-1"/>
                  <select value={lang} onChange={(e)=>setLang(e.target.value)} className="bg-slate-800 text-white border border-white/20 rounded-lg px-2 py-1 font-semibold">
                    {LANGS.map(l=>(<option key={l.code} value={l.code}>{l.label}</option>))}
                  </select>
                </div>
              </div>
            </header>

      {/* Hero */}
      <Section className="pt-10 md:pt-16" id="hero">
        <div className="relative overflow-hidden rounded-3xl border border-white/10 bg-gradient-to-b from-slate-900 to-slate-800 p-8 md:p-12">
          <div className="absolute -top-16 -left-16 h-64 w-64 bg-orange-500/20 blur-3xl rounded-full" />
          <div className={cls("max-w-3xl", align)}>
            <h1 className="text-3xl md:text-5xl font-extrabold leading-tight">{dict.tagline}</h1>
            <p className="mt-4 text-white/80 md:text-lg">{dict.heroSub}</p>
            <div className="mt-8 flex flex-col sm:flex-row gap-3">
              <OrangeButton href="#book">{dict.nav?.book||'Book'}</OrangeButton>
              <GhostButton href={WA_LINK}>{dict.ctaPrimary}</GhostButton>
            </div>
          </div>
        </div>
      </Section>

      {/* Booking */}
      <Section id="book"><BookingForm dict={dict} lang={lang}/></Section>

      {/* Features */}
      <Section>
        <h2 className={cls("text-2xl md:text-3xl font-bold mb-8", align)}>{dict.featuresTitle}</h2>
        <div className="grid md:grid-cols-3 gap-6">
          {dict.features.map((f,i)=>(
            <div key={i} className="rounded-2xl bg-slate-900/70 border border-white/10 p-6">
              <div className="h-10 w-10 rounded-xl bg-orange-500/20 grid place-items-center mb-4 ring-1 ring-orange-500/30"><span className="text-orange-400 font-extrabold">{i+1}</span></div>
              <div className="text-lg font-semibold">{f.title}</div>
              <div className="text-white/70 mt-1">{f.text}</div>
            </div>
          ))}
        </div>
      </Section>

      {/* Fleet (categories only, no prices) */}
      <Section id="fleet">
        <h2 className={cls("text-2xl md:text-3xl font-bold mb-8", align)}>{dict.fleetTitle.replace('{orSimilar}', dict.orSimilar)}</h2>
        <CategoryGrid dict={dict} lang={lang}/>
        <p className="mt-6 text-xs text-white/40">Bilder: Unsplash (freie Nutzung) â€“ Beispielmodelle (â€{dict.orSimilar}â€œ). Keine Preise/Kilometerangaben. Extras auf Anfrage.</p>
      </Section>

      {/* How */}
      <Section id="how">
        <h2 className={cls("text-2xl md:text-3xl font-bold mb-8", align)}>{dict.howTitle}</h2>
        <div className="grid md:grid-cols-3 gap-6">
          {dict.steps.map((s,i)=>(
            <motion.div key={i} className="rounded-2xl bg-slate-900/70 border border-white/10 p-6" whileHover={{ y:-2 }}>
              <div className="flex items-center gap-3 mb-2">
                <div className="h-9 w-9 rounded-lg bg-orange-500 text-white grid place-items-center font-bold">{i+1}</div>
                <div className="text-lg font-semibold">{s.title}</div>
              </div>
              <div className="text-white/70">{s.text}</div>
            </motion.div>
          ))}
        </div>
      </Section>

      {/* Contact */}
      <Section id="contact">
        <div className="rounded-3xl bg-gradient-to-b from-slate-900 to-slate-800 border border-white/10 p-8 md:p-12 text-center">
          <h2 className="text-2xl md:text-3xl font-bold">{dict.contactTitle}</h2>
          <p className="mt-2 text-white/70">{WA_NUMBER}</p>
          <div className="mt-6 flex flex-col sm:flex-row gap-3 justify-center">
            <OrangeButton href={WA_LINK}>WhatsApp</OrangeButton>
            <a className="inline-flex items-center justify-center rounded-2xl px-5 py-3 text-base font-semibold border border-white/20 hover:bg-white/10" href="tel:+905537115022">Call</a>
          </div>
        </div>
      </Section>

      <footer className="py-10 text-center text-white/60"><div className="max-w-6xl mx-auto px-4 md:px-6">{dict.footer}</div></footer>
    </div>
  );
}
